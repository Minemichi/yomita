<%= form_tag :home_search, method: :get do  %>
<%= label_tag :title, 'Title Search' %>
<%= text_field_tag 'title', params[:title] %>
<%= submit_tag "Search" %>
<% end %>

<!--　Lower Stage　-->
<section id="photos_6">
  <table>
    <tbody>
      <% if @items_3.present? %>
      <% @items_3.each do |item| %>
      <%= link_to image_tag("#{item.large_image_url}"), "#{item.item_url}" %>
      <% end %>
      <% end %>
    </tbody>
  </table>
</section>


<div id="container"></div>


  <button class="submit" value='恋愛'>恋愛</button>
  <button class="submit" value='ミステリー'> ミステリー</button>
  <button class="submit" value='DIVE'>DIVE!</button>

<!--
  <button onclick="ajaxSearch('恋愛')">1を送る</button>
-->


<div id="sample">1</div>
<div id="sampleButton">
  <button onclick="funcAdd2()">２を足す</button>
  <button onclick="funcAdd1()">1を足す</button>
  <button  class="seikou" onclick="funcAdd3()">3を足す</button>
</div>

<p>Hello World!</p>


<script type="text/javascript">
    $("p").css("color", "red");
</script>



<script type="text/javascript">

  /*
    function funcAdd1() {
        //$('.seikou').hide();
        document.getElementById( "sample" ).innerHTML =
            parseInt( document.getElementById( "sample" ).firstChild.nodeValue ) + 1;
    }
    function funcAdd2() {
        document.getElementById( "sample" ).innerHTML =
            parseInt( document.getElementById( "sample" ).firstChild.nodeValue ) + 2;
    }
    */

/*
    function  valuereceive(){
        $(function () {
            $('.submit').click(function () {
                var keyword = $(this).attr('value');
                if (!keyword) {
                    return;
                }
                ajaxSearch(keyword);
            })
        });
    }
*/


/*
    $('.submit').click(function () {
        //$('.seikou').hide();
        var keyword = $(this).attr('value');
        if (!keyword) {
            return;
        }
        ajaxSearch(keyword);
    })


function ajaxSearch(keyword,page) {
    //$('.seikou').hide();
    if (!keyword) {
        keyword = $('.submit.active').attr('value');
    }
    $.ajax({
        type: 'GET',
        url: 'https://app.rakuten.co.jp/services/api/BooksBook/Search/20170404',
        data: {
            applicationId: '1011423156545588403', // 必須
            affiliateId: '1619c75a.e3347e97.1619c75b.0859ce2c',
            title: keyword,
//            booksGenreId: keyword,
            hits: 30,
            itemCaption: keyword,
            //page: 10,
            //size: 0,
            //availability: 0,
        }
    }).done(function (data) {
        //$('.seikou').hide();
        _getItems(data)
    })
}




function _getItems(data) {
    //$('.seikou').hide();
    console.log(data);
    $('#container').empty();
//    var pageCount = data.pageCount;
//    var current = data.page;

    var dataStat = data.count;
    if (dataStat > 0) {
        $.each(data.Items, function (i, items) {
            var item = items.Item;
            var affiliateUrl = item.affiliateUrl;
            var largeimageUrl = item.largeImageUrl;
            var itemCap = item.itemCaption;
            //var mediumimageUrl = item.mediumImageUrl;

            var itemName = item.title;
            if (itemName.length > 10) {
                itemName = itemName.substring(0, 10) + '...';
            }
            var itemPrice = item.itemPrice;

            if (largeimageUrl !='https://thumbnail.image.rakuten.co.jp/@0_mall/book/cabinet/noimage_01.gif?_ex=200x200'){

                var htmlTemplate = $('<div class="grid">' +
                    '<div class="imgholder swing">' +
                    '<a href="' + affiliateUrl + '">' +
                    '<img src="' + largeimageUrl + '" alt="' + item.itemName + '" width="200" ' +
                    'height="200"/>' +
                    '</a></div>'+'<p>'+ itemCap + '</p>' );

                var htmlTemplate = $('<section class="photos_6">' +
                    '<a href="' + affiliateUrl + '">' +
                    '<img src="' + largeimageUrl + '" alt="' + item.itemName + '" width="200" ' +
                    'height="200"/>' +
                    '</a></section>' );
            }

            //テンプレートを追加
            $('#container').append(htmlTemplate);

        });

    }
}
*/




/*
    function funcAdd1() {
        //$('.seikou').hide();
        document.getElementById( "sample" ).innerHTML =
            parseInt( document.getElementById( "sample" ).firstChild.nodeValue ) + 1;
    }
    function funcAdd2() {
        document.getElementById( "sample" ).innerHTML =
            parseInt( document.getElementById( "sample" ).firstChild.nodeValue ) + 2;
    }

    $('.seikou').click(function(){
        $('.seikou').hide();
        document.getElementById( "sample" ).innerHTML =
            parseInt( document.getElementById( "sample" ).firstChild.nodeValue ) + 3;
    });
*/


</script>